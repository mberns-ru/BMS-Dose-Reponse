# ğŸ¯ Doseâ€“Response Curve Simulator

*A multi-model Streamlit application for designing, simulating, and validating doseâ€“response assays*

<p align="center">
  <img src="graphics/Logo.jpg" alt="Logo" width="260">
</p>

---

## ğŸŒŸ Overview

The **Doseâ€“Response Curve Simulator** is an interactive Streamlit application for exploring pharmacological doseâ€“response behavior across **Linear**, **2PL**, **4PL**, and **5PL** logistic models.

It is built for:

* Assay development & optimization
* Potency estimation
* Dilution-series design
* Teaching and demonstrating doseâ€“response principles

The app supports:

* âœ” Uploading parameter datasets
* âœ” Automatic model detection (2PL/4PL/5PL/Linear)
* âœ” Auto-populated parameter ranges
* âœ” Relative potency (RP) curve families
* âœ” Edge-case envelopes for robustness analysis
* âœ” A powerful dilution-factor recommender
* âœ” Saving (â€œlockingâ€) curves for comparison
* âœ” Rich visualizations powered by Plotly

---

## ğŸ“ Project Structure

```
project/
â”‚
â”œâ”€â”€ 1_Home.py                     # Landing page (tutorial + model selector)
â”œâ”€â”€ dose_response.py              # Shared doseâ€“response math utilities
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .gitattributes                 
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ 2_ğŸ§ª_4PL_Simulator.py
â”‚   â”œâ”€â”€ 3_âš—ï¸_5PL_Simulator.py
â”‚   â”œâ”€â”€ 4_ğŸ“_Linear_Simulator.py
â”‚   â”œâ”€â”€ 5_ğŸ”¬_2PL_Simulator.py
â”‚   â”œâ”€â”€ 6_ğŸ—‚ï¸_Upload.py
â”‚   â””â”€â”€ __pycache__/
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ param_loader.py
â”‚   â”œâ”€â”€ logo_utils.py
â”‚   â””â”€â”€ __pycache__/
â”‚
â”œâ”€â”€ graphics/
â”‚   â”œâ”€â”€ Logo.jpg
â”‚   â”œâ”€â”€ tut_0.png â€¦ tut_6.png       
â”‚
â””â”€â”€ sample_data/
    â”œâ”€â”€ samp_data.xlsx           # 4PL
    â”œâ”€â”€ samp_data_5pl.xlsx       # 5PL
```

---

## ğŸš€ Installation

### 1. Clone the repository

```bash
git clone <your-repo-url>
cd dose-response-simulator
```

### 2. Install dependencies

```bash
pip install -r requirements.txt
```

### 3. Run the application

```bash
streamlit run 1_Home.py
```

This opens a browser window with the full interactive interface.

---

## ğŸ§¬ Supported Models

### ğŸ“ Linear Model

[
y = m \cdot \log_{10}(x) + b
]

### ğŸ”¬ 2PL Logistic Model

Normalized sigmoid with fixed lower/upper bounds.

### ğŸ§ª 4PL Logistic Model

[
y = D + \frac{A - D}{1 + 10^{B(\log_{10}(x) - \log_{10}(C))}}
]

### âš—ï¸ 5PL Logistic Model

Asymmetric extension of the 4PL:
[
y = D + \frac{A - D}{\left(1 + 10^{B(\log_{10}(x) - \log_{10}(C))}\right)^E}
]

Each model page supports:

* Min/Max parameter inputs
* Averaged central curve
* RP curve families
* Edge-case envelopes
* Curve locking
* Well-by-well preview tables

---

## ğŸ“¤ Uploading Parameter Files

Use the Upload page to import `.csv`, `.xlsx`, or `.xls` files.

The app will:

âœ” Detect the appropriate model
âœ” Extract numerical parameters
âœ” Generate **Min/Max** bounds
âœ” Auto-fill the simulator pages
âœ” Show previews of raw and summarized data

A **Clear load** button resets imported data.

---

## ğŸ”§ Interactive Tools

### **Dilution Series Builder**

* Uniform dilution factors (e.g., âˆš10 â‰ˆ 3.162)
* Custom 7-factor dilution inputs
* Sparse (8-point) and dense grids

### **Relative Potency (RP) Curve Families**

RP curves are generated by adjusting ECâ‚…â‚€ (logistic models) or scaling response (linear model).

### **Edge-Case Envelope Visualization**

Every simulator displays curves built from:

* All min/max combinations of parameters
* Showing slope extremes, shifts, asymptotes, and assay uncertainty regions

### **Curve Locking**

Saved (â€œlockedâ€) curves maintain:

* Their 8 point grid
* Their RP variations
* Their unique color
* Their dilution settings

Locked curves persist until cleared.

---

## ğŸ§  Dilution-Factor Recommender

Available for:

* 4PL
* 5PL

The recommender:

* Evaluates dilution factors from **1.2Ã— â†’ 10Ã—**
* Computes bottom / linear / top region coverage
* Scores candidate patterns
* Uses **16â€“32 edge-case parameter combinations**
* Prefers **2â€“4â€“2** region distribution
* Identifies factors that satisfy *minimum* and *preferred* coverage criteria

This ensures your dilution series captures the informative midpoints and anchor regions.

---

## ğŸ–¥ UI & UX

* Responsive layout with Streamlit
* Persistent sidebar logo
* Clean two-column layout
* Tutorial expanders with hover images
* Plotly line and scatter visualizations
* Automatic color assignment for RP and locked curves

---

## ğŸ“š Sample Data

`sample_data/` includes example files for:

* 4PL
* 5PL

Useful for testing and demonstrations.

---

## ğŸ“œ License

TBD.

---

## ğŸ™Œ Acknowledgments

Created by Madeline Berns, Tanvi Pathak, and Ziqi Wei.
